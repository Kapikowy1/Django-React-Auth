{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/newus/OneDrive/Pulpit/DocoAppDemoFinal/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/newus/OneDrive/Pulpit/DocoAppDemoFinal/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from'axios';import Cookies from'js-cookie';import{REGISTER_SUCCESS,REGISTER_FAIL,LOGIN_SUCCESS,LOGIN_FAIL,LOGOUT_SUCCESS,LOGOUT_FAIL}from'./myTypes';export var login=function login(username,password){var _ref;return function(_x){return(_ref=_ref||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var config,body,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:config={headers:{'Accept':'application/json','Content-Type':'application/json','X-CSRFToken':Cookies.get('csrftoken')}};body=JSON.stringify({username:username,password:password});_context.prev=2;_context.next=5;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/accounts/login\"),body,config);case 5:res=_context.sent;if(res.data.success){dispatch({type:LOGIN_SUCCESS,payload:res.data.username});}else{dispatch({type:LOGIN_FAIL});}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);dispatch({type:LOGIN_FAIL});case 12:case\"end\":return _context.stop();}},_callee,null,[[2,9]]);}))).apply(this,arguments);};};export var register=function register(username,password,re_password){var _ref2;return function(_x2){return(_ref2=_ref2||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var config,body,res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:config={headers:{'Accept':'application/json','Content-Type':'application/json','X-CSRFToken':Cookies.get('csrftoken')}};body=JSON.stringify({username:username,password:password,re_password:re_password});_context2.prev=2;_context2.next=5;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/accounts/register\"),body,config);case 5:res=_context2.sent;if(res.data.error){dispatch({type:REGISTER_FAIL});}else{dispatch({type:REGISTER_SUCCESS});}_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);dispatch({type:REGISTER_FAIL});case 12:case\"end\":return _context2.stop();}},_callee2,null,[[2,9]]);}))).apply(this,arguments);};};export var logout=function logout(){var _ref3;return function(_x3){return(_ref3=_ref3||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var config,body,res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:config={headers:{'Accept':'application/json','Content-Type':'application/json','X-CSRFToken':Cookies.get('csrftoken')}};body=JSON.stringify({'withCredentials':true});_context3.prev=2;_context3.next=5;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/accounts/logout\"),body,config);case 5:res=_context3.sent;if(res.data.success){dispatch({type:LOGOUT_SUCCESS});}else{dispatch({type:LOGOUT_FAIL});}_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](2);dispatch({type:LOGOUT_FAIL});case 12:case\"end\":return _context3.stop();}},_callee3,null,[[2,9]]);}))).apply(this,arguments);};};","map":{"version":3,"names":["axios","Cookies","REGISTER_SUCCESS","REGISTER_FAIL","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT_SUCCESS","LOGOUT_FAIL","login","username","password","_ref","_x","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dispatch","config","body","res","wrap","_callee$","_context","prev","next","headers","get","JSON","stringify","post","concat","process","env","REACT_APP_API_URL","sent","data","success","type","payload","t0","stop","apply","arguments","register","re_password","_ref2","_x2","_callee2","_callee2$","_context2","error","logout","_ref3","_x3","_callee3","_callee3$","_context3"],"sources":["C:/Users/newus/OneDrive/Pulpit/DocoAppDemoFinal/frontend/src/actions/auth.js"],"sourcesContent":["import axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport {\r\n    REGISTER_SUCCESS,\r\n    REGISTER_FAIL,\r\n    LOGIN_SUCCESS,\r\n    LOGIN_FAIL,\r\n    LOGOUT_SUCCESS,\r\n    LOGOUT_FAIL,\r\n} from './myTypes';\r\n\r\nexport const login = (username, password) => async dispatch => {\r\n    const config = {\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n            'X-CSRFToken': Cookies.get('csrftoken')\r\n        }\r\n    };\r\n\r\n    const body = JSON.stringify({ username, password });\r\n\r\n    try {\r\n        const res = await axios.post(`${process.env.REACT_APP_API_URL}/accounts/login`, body, config);\r\n\r\n        if (res.data.success) {\r\n            dispatch({\r\n                type: LOGIN_SUCCESS,\r\n                payload: res.data.username\r\n            });\r\n\r\n            \r\n        } else {\r\n            dispatch({\r\n                type: LOGIN_FAIL\r\n            });\r\n        }\r\n    } catch(err) {\r\n        dispatch({\r\n            type: LOGIN_FAIL\r\n        });\r\n    }\r\n};\r\n\r\n\r\nexport const register = (username, password, re_password) => async dispatch => {\r\n    const config = {\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n            'X-CSRFToken': Cookies.get('csrftoken')\r\n        }\r\n    };\r\n\r\n    const body = JSON.stringify({ username, password, re_password });\r\n\r\n    try {\r\n        const res = await axios.post(`${process.env.REACT_APP_API_URL}/accounts/register`, body, config);\r\n\r\n        if (res.data.error) {\r\n            dispatch({\r\n                type: REGISTER_FAIL\r\n            });\r\n        } else {\r\n            dispatch({\r\n                type: REGISTER_SUCCESS\r\n            });\r\n        }\r\n    } catch (err) {\r\n        dispatch({\r\n            type: REGISTER_FAIL\r\n        });\r\n    }\r\n};\r\n\r\nexport const logout = () => async dispatch => {\r\n    const config = {\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n            'X-CSRFToken': Cookies.get('csrftoken')\r\n        }\r\n    };\r\n\r\n    const body = JSON.stringify({\r\n        'withCredentials': true\r\n    });\r\n\r\n    try {\r\n        const res = await axios.post(`${process.env.REACT_APP_API_URL}/accounts/logout`, body, config);\r\n\r\n        if (res.data.success) {\r\n            dispatch({\r\n                type: LOGOUT_SUCCESS\r\n            });\r\n        } else {\r\n            dispatch({\r\n                type: LOGOUT_FAIL\r\n            });\r\n        }\r\n    } catch(err) {\r\n        dispatch({\r\n            type: LOGOUT_FAIL\r\n        });\r\n    }\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}