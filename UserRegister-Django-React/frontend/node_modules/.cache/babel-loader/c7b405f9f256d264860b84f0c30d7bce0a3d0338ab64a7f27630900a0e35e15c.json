{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/newus/OneDrive/Pulpit/DocoAppDemoFinal/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/newus/OneDrive/Pulpit/DocoAppDemoFinal/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from'axios';import Cookies from'js-cookie';import{load_user}from'./profile';import{REGISTER_SUCCESS,REGISTER_FAIL,LOGIN_SUCCESS,LOGIN_FAIL,LOGOUT_SUCCESS,LOGOUT_FAIL,AUTHENTICATED_SUCCESS,AUTHENTICATED_FAIL}from'./myTypes';export var checkAuthenticated=function checkAuthenticated(){var _ref;return function(_x){return(_ref=_ref||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var config,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:config={headers:{'Accept':'application/json','Content-Type':'application/json'}};_context.prev=1;_context.next=4;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/accounts/authenticated\"),config);case 4:res=_context.sent;if(res.data.error||res.data.isAuthenticated==='error'){dispatch({type:AUTHENTICATED_FAIL,payload:false});}else if(res.data.isAuthenticated==='success'){dispatch({type:AUTHENTICATED_SUCCESS,payload:true});}else{dispatch({type:AUTHENTICATED_FAIL,payload:false});}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);dispatch({type:AUTHENTICATED_FAIL,payload:false});case 11:case\"end\":return _context.stop();}},_callee,null,[[1,8]]);}))).apply(this,arguments);};};export var login=function login(username,password){var _ref2;return function(_x2){return(_ref2=_ref2||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var config,body,res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:config={headers:{'Accept':'application/json','Content-Type':'application/json','X-CSRFToken':Cookies.get('csrftoken')}};body=JSON.stringify({username:username,password:password});_context2.prev=2;_context2.next=5;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/accounts/login\"),body,config);case 5:res=_context2.sent;if(res.data.success){dispatch({type:LOGIN_SUCCESS});dispatch(load_user());}else{dispatch({type:LOGIN_FAIL});}_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);dispatch({type:LOGIN_FAIL});case 12:case\"end\":return _context2.stop();}},_callee2,null,[[2,9]]);}))).apply(this,arguments);};};export var register=function register(username,password,re_password){var _ref3;return function(_x3){return(_ref3=_ref3||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var config,body,res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:config={headers:{'Accept':'application/json','Content-Type':'application/json','X-CSRFToken':Cookies.get('csrftoken')}};body=JSON.stringify({username:username,password:password,re_password:re_password});_context3.prev=2;_context3.next=5;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/accounts/register\"),body,config);case 5:res=_context3.sent;if(res.data.error){dispatch({type:REGISTER_FAIL});}else{dispatch({type:REGISTER_SUCCESS});}_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](2);dispatch({type:REGISTER_FAIL});case 12:case\"end\":return _context3.stop();}},_callee3,null,[[2,9]]);}))).apply(this,arguments);};};export var logout=function logout(){var _ref4;return function(_x4){return(_ref4=_ref4||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(dispatch){var config,body,res;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:config={headers:{'Accept':'application/json','Content-Type':'application/json','X-CSRFToken':Cookies.get('csrftoken')}};body=JSON.stringify({'withCredentials':true});_context4.prev=2;_context4.next=5;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/accounts/logout\"),body,config);case 5:res=_context4.sent;if(res.data.success){dispatch({type:LOGOUT_SUCCESS,payload:false});}else{dispatch({type:LOGOUT_FAIL});}_context4.next=12;break;case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](2);dispatch({type:LOGOUT_FAIL});case 12:case\"end\":return _context4.stop();}},_callee4,null,[[2,9]]);}))).apply(this,arguments);};};","map":{"version":3,"names":["axios","Cookies","load_user","REGISTER_SUCCESS","REGISTER_FAIL","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT_SUCCESS","LOGOUT_FAIL","AUTHENTICATED_SUCCESS","AUTHENTICATED_FAIL","checkAuthenticated","_ref","_x","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dispatch","config","res","wrap","_callee$","_context","prev","next","headers","get","concat","process","env","REACT_APP_API_URL","sent","data","error","isAuthenticated","type","payload","t0","stop","apply","arguments","login","username","password","_ref2","_x2","_callee2","body","_callee2$","_context2","JSON","stringify","post","success","register","re_password","_ref3","_x3","_callee3","_callee3$","_context3","logout","_ref4","_x4","_callee4","_callee4$","_context4"],"sources":["C:/Users/newus/OneDrive/Pulpit/DocoAppDemoFinal/frontend/src/actions/auth.js"],"sourcesContent":["import axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport { load_user } from './profile';\r\nimport {\r\n    REGISTER_SUCCESS,\r\n    REGISTER_FAIL,\r\n    LOGIN_SUCCESS,\r\n    LOGIN_FAIL,\r\n    LOGOUT_SUCCESS,\r\n    LOGOUT_FAIL,\r\n    AUTHENTICATED_SUCCESS,\r\n    AUTHENTICATED_FAIL\r\n\r\n} from './myTypes';\r\n\r\nexport const checkAuthenticated = () => async dispatch => {\r\n    const config = {\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n        }\r\n    };\r\n\r\n    try {\r\n        const res = await axios.get(`${process.env.REACT_APP_API_URL}/accounts/authenticated`, config);\r\n\r\n        if (res.data.error || res.data.isAuthenticated === 'error') {\r\n            dispatch({\r\n                type: AUTHENTICATED_FAIL,\r\n                payload: false\r\n            });\r\n        }\r\n        else if (res.data.isAuthenticated === 'success') {\r\n            dispatch({\r\n                type: AUTHENTICATED_SUCCESS,\r\n                payload: true\r\n            });\r\n        }\r\n        else {\r\n            dispatch({\r\n                type: AUTHENTICATED_FAIL,\r\n                payload: false\r\n            });\r\n        }\r\n    } catch(err) {\r\n        dispatch({\r\n            type: AUTHENTICATED_FAIL,\r\n            payload: false\r\n        });\r\n    }\r\n};\r\n\r\nexport const login = (username, password) => async dispatch => {\r\n    const config = {\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n            'X-CSRFToken': Cookies.get('csrftoken')\r\n        }\r\n    };\r\n\r\n    const body = JSON.stringify({ username, password });\r\n\r\n    try {\r\n        const res = await axios.post(`${process.env.REACT_APP_API_URL}/accounts/login`, body, config);\r\n\r\n        if (res.data.success) {\r\n            dispatch({\r\n                type: LOGIN_SUCCESS\r\n            });\r\n\r\n            dispatch(load_user());\r\n        } else {\r\n            dispatch({\r\n                type: LOGIN_FAIL\r\n            });\r\n        }\r\n    } catch(err) {\r\n        dispatch({\r\n            type: LOGIN_FAIL\r\n        });\r\n    }\r\n};\r\n\r\nexport const register = (username, password, re_password) => async dispatch => {\r\n    const config = {\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n            'X-CSRFToken': Cookies.get('csrftoken')\r\n        }\r\n    };\r\n\r\n    const body = JSON.stringify({ username, password, re_password });\r\n\r\n    try {\r\n        const res = await axios.post(`${process.env.REACT_APP_API_URL}/accounts/register`, body, config);\r\n\r\n        if (res.data.error) {\r\n            dispatch({\r\n                type: REGISTER_FAIL\r\n            });\r\n        } else {\r\n            dispatch({\r\n                type: REGISTER_SUCCESS\r\n            });\r\n        }\r\n    } catch (err) {\r\n        dispatch({\r\n            type: REGISTER_FAIL\r\n        });\r\n    }\r\n};\r\n\r\nexport const logout = () => async dispatch => {\r\n    const config = {\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n            'X-CSRFToken': Cookies.get('csrftoken')\r\n        }\r\n    };\r\n\r\n    const body = JSON.stringify({\r\n        'withCredentials': true\r\n    });\r\n\r\n    try {\r\n        const res = await axios.post(`${process.env.REACT_APP_API_URL}/accounts/logout`, body, config);\r\n\r\n        if (res.data.success) {\r\n            dispatch({\r\n                type: LOGOUT_SUCCESS,\r\n                payload: false\r\n            });\r\n        } else {\r\n            dispatch({\r\n                type: LOGOUT_FAIL\r\n            });\r\n        }\r\n    } catch(err) {\r\n        dispatch({\r\n            type: LOGOUT_FAIL\r\n        });\r\n    }\r\n};"],"mappings":"4SAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,OAAO,KAAM,WAAW,CAC/B,OAASC,SAAS,KAAQ,WAAW,CACrC,OACIC,gBAAgB,CAChBC,aAAa,CACbC,aAAa,CACbC,UAAU,CACVC,cAAc,CACdC,WAAW,CACXC,qBAAqB,CACrBC,kBAAkB,KAEf,WAAW,CAElB,MAAO,IAAM,CAAAC,kBAAkB,CAAG,QAArB,CAAAA,kBAAkBA,CAAA,MAAAC,IAAA,iBAAAC,EAAA,SAAAD,IAAA,CAAAA,IAAA,EAAAE,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAS,SAAAC,QAAMC,QAAQ,MAAAC,MAAA,CAAAC,GAAA,QAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAC5CN,MAAM,CAAG,CACXO,OAAO,CAAE,CACL,QAAQ,CAAE,kBAAkB,CAC5B,cAAc,CAAE,kBACpB,CACJ,CAAC,CAAAH,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAGqB,CAAAzB,KAAK,CAAC2B,GAAG,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,iBAAiB,4BAA2BZ,MAAM,CAAC,QAAxFC,GAAG,CAAAG,QAAA,CAAAS,IAAA,CAET,GAAIZ,GAAG,CAACa,IAAI,CAACC,KAAK,EAAId,GAAG,CAACa,IAAI,CAACE,eAAe,GAAK,OAAO,CAAE,CACxDjB,QAAQ,CAAC,CACLkB,IAAI,CAAE1B,kBAAkB,CACxB2B,OAAO,CAAE,KACb,CAAC,CAAC,CACN,CAAC,IACI,IAAIjB,GAAG,CAACa,IAAI,CAACE,eAAe,GAAK,SAAS,CAAE,CAC7CjB,QAAQ,CAAC,CACLkB,IAAI,CAAE3B,qBAAqB,CAC3B4B,OAAO,CAAE,IACb,CAAC,CAAC,CACN,CAAC,IACI,CACDnB,QAAQ,CAAC,CACLkB,IAAI,CAAE1B,kBAAkB,CACxB2B,OAAO,CAAE,KACb,CAAC,CAAC,CACN,CAACd,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAe,EAAA,CAAAf,QAAA,aAEDL,QAAQ,CAAC,CACLkB,IAAI,CAAE1B,kBAAkB,CACxB2B,OAAO,CAAE,KACb,CAAC,CAAC,CAAC,yBAAAd,QAAA,CAAAgB,IAAA,MAAAtB,OAAA,gBAEV,IAAAuB,KAAA,MAAAC,SAAA,MAED,MAAO,IAAM,CAAAC,KAAK,CAAG,QAAR,CAAAA,KAAKA,CAAIC,QAAQ,CAAEC,QAAQ,MAAAC,KAAA,iBAAAC,GAAA,SAAAD,KAAA,CAAAA,KAAA,EAAA/B,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAK,SAAA+B,SAAM7B,QAAQ,MAAAC,MAAA,CAAA6B,IAAA,CAAA5B,GAAA,QAAAL,mBAAA,GAAAM,IAAA,UAAA4B,UAAAC,SAAA,iBAAAA,SAAA,CAAA1B,IAAA,CAAA0B,SAAA,CAAAzB,IAAA,SACjDN,MAAM,CAAG,CACXO,OAAO,CAAE,CACL,QAAQ,CAAE,kBAAkB,CAC5B,cAAc,CAAE,kBAAkB,CAClC,aAAa,CAAEzB,OAAO,CAAC0B,GAAG,CAAC,WAAW,CAC1C,CACJ,CAAC,CAEKqB,IAAI,CAAGG,IAAI,CAACC,SAAS,CAAC,CAAET,QAAQ,CAARA,QAAQ,CAAEC,QAAQ,CAARA,QAAS,CAAC,CAAC,CAAAM,SAAA,CAAA1B,IAAA,GAAA0B,SAAA,CAAAzB,IAAA,SAG7B,CAAAzB,KAAK,CAACqD,IAAI,IAAAzB,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,iBAAiB,oBAAmBiB,IAAI,CAAE7B,MAAM,CAAC,QAAvFC,GAAG,CAAA8B,SAAA,CAAAlB,IAAA,CAET,GAAIZ,GAAG,CAACa,IAAI,CAACqB,OAAO,CAAE,CAClBpC,QAAQ,CAAC,CACLkB,IAAI,CAAE/B,aACV,CAAC,CAAC,CAEFa,QAAQ,CAAChB,SAAS,CAAC,CAAC,CAAC,CACzB,CAAC,IAAM,CACHgB,QAAQ,CAAC,CACLkB,IAAI,CAAE9B,UACV,CAAC,CAAC,CACN,CAAC4C,SAAA,CAAAzB,IAAA,iBAAAyB,SAAA,CAAA1B,IAAA,GAAA0B,SAAA,CAAAZ,EAAA,CAAAY,SAAA,aAEDhC,QAAQ,CAAC,CACLkB,IAAI,CAAE9B,UACV,CAAC,CAAC,CAAC,yBAAA4C,SAAA,CAAAX,IAAA,MAAAQ,QAAA,gBAEV,IAAAP,KAAA,MAAAC,SAAA,MAED,MAAO,IAAM,CAAAc,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAIZ,QAAQ,CAAEC,QAAQ,CAAEY,WAAW,MAAAC,KAAA,iBAAAC,GAAA,SAAAD,KAAA,CAAAA,KAAA,EAAA3C,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAK,SAAA2C,SAAMzC,QAAQ,MAAAC,MAAA,CAAA6B,IAAA,CAAA5B,GAAA,QAAAL,mBAAA,GAAAM,IAAA,UAAAuC,UAAAC,SAAA,iBAAAA,SAAA,CAAArC,IAAA,CAAAqC,SAAA,CAAApC,IAAA,SACjEN,MAAM,CAAG,CACXO,OAAO,CAAE,CACL,QAAQ,CAAE,kBAAkB,CAC5B,cAAc,CAAE,kBAAkB,CAClC,aAAa,CAAEzB,OAAO,CAAC0B,GAAG,CAAC,WAAW,CAC1C,CACJ,CAAC,CAEKqB,IAAI,CAAGG,IAAI,CAACC,SAAS,CAAC,CAAET,QAAQ,CAARA,QAAQ,CAAEC,QAAQ,CAARA,QAAQ,CAAEY,WAAW,CAAXA,WAAY,CAAC,CAAC,CAAAK,SAAA,CAAArC,IAAA,GAAAqC,SAAA,CAAApC,IAAA,SAG1C,CAAAzB,KAAK,CAACqD,IAAI,IAAAzB,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,iBAAiB,uBAAsBiB,IAAI,CAAE7B,MAAM,CAAC,QAA1FC,GAAG,CAAAyC,SAAA,CAAA7B,IAAA,CAET,GAAIZ,GAAG,CAACa,IAAI,CAACC,KAAK,CAAE,CAChBhB,QAAQ,CAAC,CACLkB,IAAI,CAAEhC,aACV,CAAC,CAAC,CACN,CAAC,IAAM,CACHc,QAAQ,CAAC,CACLkB,IAAI,CAAEjC,gBACV,CAAC,CAAC,CACN,CAAC0D,SAAA,CAAApC,IAAA,iBAAAoC,SAAA,CAAArC,IAAA,GAAAqC,SAAA,CAAAvB,EAAA,CAAAuB,SAAA,aAED3C,QAAQ,CAAC,CACLkB,IAAI,CAAEhC,aACV,CAAC,CAAC,CAAC,yBAAAyD,SAAA,CAAAtB,IAAA,MAAAoB,QAAA,gBAEV,IAAAnB,KAAA,MAAAC,SAAA,MAED,MAAO,IAAM,CAAAqB,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAA,MAAAC,KAAA,iBAAAC,GAAA,SAAAD,KAAA,CAAAA,KAAA,EAAAjD,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAS,SAAAiD,SAAM/C,QAAQ,MAAAC,MAAA,CAAA6B,IAAA,CAAA5B,GAAA,QAAAL,mBAAA,GAAAM,IAAA,UAAA6C,UAAAC,SAAA,iBAAAA,SAAA,CAAA3C,IAAA,CAAA2C,SAAA,CAAA1C,IAAA,SAChCN,MAAM,CAAG,CACXO,OAAO,CAAE,CACL,QAAQ,CAAE,kBAAkB,CAC5B,cAAc,CAAE,kBAAkB,CAClC,aAAa,CAAEzB,OAAO,CAAC0B,GAAG,CAAC,WAAW,CAC1C,CACJ,CAAC,CAEKqB,IAAI,CAAGG,IAAI,CAACC,SAAS,CAAC,CACxB,iBAAiB,CAAE,IACvB,CAAC,CAAC,CAAAe,SAAA,CAAA3C,IAAA,GAAA2C,SAAA,CAAA1C,IAAA,SAGoB,CAAAzB,KAAK,CAACqD,IAAI,IAAAzB,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,iBAAiB,qBAAoBiB,IAAI,CAAE7B,MAAM,CAAC,QAAxFC,GAAG,CAAA+C,SAAA,CAAAnC,IAAA,CAET,GAAIZ,GAAG,CAACa,IAAI,CAACqB,OAAO,CAAE,CAClBpC,QAAQ,CAAC,CACLkB,IAAI,CAAE7B,cAAc,CACpB8B,OAAO,CAAE,KACb,CAAC,CAAC,CACN,CAAC,IAAM,CACHnB,QAAQ,CAAC,CACLkB,IAAI,CAAE5B,WACV,CAAC,CAAC,CACN,CAAC2D,SAAA,CAAA1C,IAAA,iBAAA0C,SAAA,CAAA3C,IAAA,GAAA2C,SAAA,CAAA7B,EAAA,CAAA6B,SAAA,aAEDjD,QAAQ,CAAC,CACLkB,IAAI,CAAE5B,WACV,CAAC,CAAC,CAAC,yBAAA2D,SAAA,CAAA5B,IAAA,MAAA0B,QAAA,gBAEV,IAAAzB,KAAA,MAAAC,SAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}