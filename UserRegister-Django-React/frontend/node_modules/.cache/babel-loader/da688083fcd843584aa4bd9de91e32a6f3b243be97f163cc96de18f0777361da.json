{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/newus/OneDrive/Pulpit/DocoAppDemoFinal/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/newus/OneDrive/Pulpit/DocoAppDemoFinal/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import Cookies from'js-cookie';import axios from'axios';import{LOAD_USER_PROFILE_SUCCESS,LOAD_USER_PROFILE_FAIL,UPDATE_USER_PROFILE_SUCCESS,UPDATE_USER_PROFILE_FAIL}from'./myTypes';export var load_user=function load_user(){var _ref;return function(_x){return(_ref=_ref||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var config,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:config={headers:{'Accept':'application/json','Content-Type':'application/json'}};_context.prev=1;_context.next=4;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/profile/user\"),config);case 4:res=_context.sent;if(res.data.error){dispatch({type:LOAD_USER_PROFILE_FAIL});}else{dispatch({type:LOAD_USER_PROFILE_SUCCESS,payload:res.data});}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);dispatch({type:LOAD_USER_PROFILE_FAIL});case 11:case\"end\":return _context.stop();}},_callee,null,[[1,8]]);}))).apply(this,arguments);};};export var update_profile=function update_profile(first_name,last_name,phone,city){var _ref2;return function(_x2){return(_ref2=_ref2||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var config,body,res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:config={headers:{'Accept':'application/json','Content-Type':'application/json','X-CSRFToken':Cookies.get('csrftoken')}};body=JSON.stringify({'withCredentials':true,first_name:first_name,last_name:last_name,phone:phone,city:city});_context2.prev=2;_context2.next=5;return axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/profile/update\"),body,config);case 5:res=_context2.sent;if(res.data.profile&&res.data.username){dispatch({type:UPDATE_USER_PROFILE_SUCCESS,payload:res.data});}else{dispatch({type:UPDATE_USER_PROFILE_FAIL});}_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);dispatch({type:UPDATE_USER_PROFILE_FAIL});case 12:case\"end\":return _context2.stop();}},_callee2,null,[[2,9]]);}))).apply(this,arguments);};};","map":{"version":3,"names":["Cookies","axios","LOAD_USER_PROFILE_SUCCESS","LOAD_USER_PROFILE_FAIL","UPDATE_USER_PROFILE_SUCCESS","UPDATE_USER_PROFILE_FAIL","load_user","_ref","_x","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dispatch","config","res","wrap","_callee$","_context","prev","next","headers","get","concat","process","env","REACT_APP_API_URL","sent","data","error","type","payload","t0","stop","apply","arguments","update_profile","first_name","last_name","phone","city","_ref2","_x2","_callee2","body","_callee2$","_context2","JSON","stringify","put","profile","username"],"sources":["C:/Users/newus/OneDrive/Pulpit/DocoAppDemoFinal/frontend/src/actions/profile.js"],"sourcesContent":["import Cookies from 'js-cookie';\r\nimport axios from 'axios';\r\nimport {\r\n    LOAD_USER_PROFILE_SUCCESS,\r\n    LOAD_USER_PROFILE_FAIL,\r\n    UPDATE_USER_PROFILE_SUCCESS,\r\n    UPDATE_USER_PROFILE_FAIL\r\n} from './myTypes';\r\n\r\nexport const load_user = () => async dispatch => {\r\n    const config = {\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n        }\r\n    };\r\n\r\n    try {\r\n        const res = await axios.get(`${process.env.REACT_APP_API_URL}/profile/user`, config);\r\n\r\n        if (res.data.error) {\r\n            dispatch({\r\n                type: LOAD_USER_PROFILE_FAIL\r\n            });\r\n        } else {\r\n            dispatch({\r\n                type: LOAD_USER_PROFILE_SUCCESS,\r\n                payload: res.data\r\n            });\r\n        }\r\n    } catch (err) {\r\n        dispatch({\r\n            type: LOAD_USER_PROFILE_FAIL\r\n        });\r\n    }\r\n};\r\n\r\nexport const update_profile = (first_name, last_name, phone, city) => async dispatch => {\r\n    const config = {\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n            'X-CSRFToken': Cookies.get('csrftoken')\r\n        }\r\n    };\r\n\r\n    const body = JSON.stringify({\r\n        'withCredentials': true,\r\n        first_name,\r\n        last_name,\r\n        phone,\r\n        city\r\n    });\r\n\r\n    try {\r\n        const res = await axios.put(`${process.env.REACT_APP_API_URL}/profile/update`, body, config);\r\n\r\n        if (res.data.profile && res.data.username) {\r\n            dispatch({\r\n                type: UPDATE_USER_PROFILE_SUCCESS,\r\n                payload: res.data\r\n            });\r\n        } else {\r\n            dispatch({\r\n                type: UPDATE_USER_PROFILE_FAIL\r\n            });\r\n        }\r\n    } catch (err) {\r\n        dispatch({\r\n            type: UPDATE_USER_PROFILE_FAIL\r\n        });\r\n    }\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}